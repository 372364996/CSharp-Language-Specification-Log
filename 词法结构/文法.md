# 文法

本规范采用两种文法来表示C\#编程语言的语法：

* 词法文法：规定怎样将Unicode字符组合成行结束符、空白、注释、标记和预处理指令等。
* 句法文法：规定如何将那些由词法文法产生的标记组合成C\#程序。

### 文法表示方法

词法文法和句法文法都用**文法产生式**来表示。

* 文法产生式：定义一个非结束符号和它可能的扩展。
* * 第一行：非结束符号的名称，后跟一个冒号；
  * 每个后续的缩进行：列出可能的扩展，是以非结束符或结束符组成的序列的形式给出的；

  ```
  文法产生式 示例：
  while-statement:
      while ( boolean-expression ) embedded-statement
  ```

  * 一个符号若以“_opt”_下标作为后缀，就表明该符号是可选的；

  ```
  block:
      { statement-listopt  }

  是以下“文法产生式”的简写形式：
  block:
      {  }
      { statement-list }
  ```

  * 可选通常在单独的行上列出，当有多个可选项时，可在给定的扩展列之后加上短语“one of”；

  ```
  real-type-suffix: ont of
  F f D d

  是以下产生式的简短形式：
  real-type-suffix:
      F
      f
      D
      d
  ```

### 词法文法

C\#程序中的每个源文件都必须符合词法文法 _input _产生式。_input _产生式定义C\#源文件的词法结构。

_input _产生式：

```
input:
    input-section(opt)
input-section:
    input-section-part
    input-section input-section-part
input-section-part:
    input-elements(opt) new-line
    pp-directive
input-elements:
    input-element
    input-elements input-element
input-element:
    whitespace
    comment
    token
```

C\#源文件的词法结构由5个基本元素组成，需要标记在C\#程序的句法文法中才有重要意义：

* 行结束符（new-line）：分隔标记；
* 空白（whitespace）：分隔标记，包含空白字符、水平制表符、垂直制表符和换页符；
* 注释：分隔标记；
  * 单行注释（single-line-comment）：// 注释内容
  * 带分隔符的注释（delimited-comment）：/\* 注释内容 \*/
* 标记（token）：
  * 标识符（）：
  * 关键字（）：
  * 文本（）：
  * 运算符（）：
  * 标点符号（）：
* 预处理指令：跳过源文件中的某些节；

对c\#源文件的词法处理：将文件缩减成标记序列，该**标记序列**是句法分析的输入。

当有多个**词法文法产生式**与源文件中的一个**字符序列**匹配时，词法处理总是构成尽可能最长的词法元素（例如//按单行注释开头处理，因为该词法元素比一个/标记要长）。

### 句法文法

句法文法的结束符是由词法文法定义的标记；

句法文法指定如何组合这些标记以构成C\#程序；

